(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{16:function(e,t,n){"use strict";var c=n(19),a=n.n(c),r=n(26),s=n(22),o=n.n(s),i=n(3);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},d=Object(i.c)("auth/fetchCurrent",function(){var e=Object(r.a)(a.a.mark((function e(t,n){var c,r,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return u(r),e.prev=5,e.next=8,o.a.get("/users/current");case 8:return s=e.sent,i=s.data,e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),j={register:Object(i.c)("auth/register",function(){var e=Object(r.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/signup",t);case 3:return n=e.sent,c=n.data,u(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),logIn:Object(i.c)("auth/login",function(){var e=Object(r.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,u(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),logOut:Object(i.c)("auth/logout",Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/logout");case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),fetchCurrentUser:d};t.a=j},17:function(e,t,n){"use strict";var c=n(3),a=Object(c.b)("contact/fetchContactRequest"),r=Object(c.b)("contact/fetchContactSuccess"),s=Object(c.b)("contact/fetchContactError"),o=Object(c.b)("contact/addContactRequest"),i=Object(c.b)("contact/addContactSuccess"),u=Object(c.b)("contact/addContactError"),l=Object(c.b)("contact/deleteItemRequest"),d=Object(c.b)("contact/deleteItemSuccess"),j=Object(c.b)("contact/deleteItemError"),b=Object(c.b)("filter/change");t.a={fetchContactRequest:a,fetchContactSuccess:r,fetchContactError:s,addContactRequest:o,addContactSuccess:i,addContactError:u,deleteItemRequest:l,deleteItemSuccess:d,deleteItemError:j,changeFilter:b}},28:function(e,t,n){e.exports={link:"Navigation_link__ytjZB",activeLink:"Navigation_activeLink__1BMsk Navigation_link__ytjZB"}},29:function(e,t,n){e.exports={link:"AuthNav_link__1sqMw",activeLink:"AuthNav_activeLink__dBBZf AuthNav_link__1sqMw"}},34:function(e,t,n){e.exports={container:"UserMenu_container__3QF9G",avatar:"UserMenu_avatar__1bACa",name:"UserMenu_name__2x9zL"}},37:function(e,t,n){e.exports={Header:"AppBar_Header__1Dn-O",NavigContainer:"AppBar_NavigContainer__10UvO"}},39:function(e,t,n){"use strict";n(0);var c=n(48),a=n.n(c),r=n(2);t.a=function(e){var t=e.children;return Object(r.jsx)("div",{className:a.a.container,children:t})}},48:function(e,t,n){e.exports={container:"Container_container__3R4sp"}},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(21),s=n.n(r),o=n(15),i=n(8),u=n(5),l=n(39),d=function(e){return e.auth.isLoggedIn},j=function(e){return e.auth.user.name},b=function(e){return e.auth.isLoadingCurrentUser},O=n(28),f=n.n(O),h=n(2),p=function(){var e=Object(i.d)(d);return Object(h.jsxs)("nav",{children:[Object(h.jsx)(o.b,{exact:!0,to:"/",className:f.a.link,activeClassName:f.a.activeLink,children:"Home"}),e&&Object(h.jsx)(o.b,{to:"/contacts",exact:!0,className:f.a.link,activeClassName:f.a.activeLink,children:"Contacts"})]})},v=n(29),g=n.n(v);var x=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(o.b,{to:"/register",exact:!0,className:g.a.link,activeClassName:g.a.activeLink,children:"Register"}),Object(h.jsx)(o.b,{to:"/login",exact:!0,className:g.a.link,activeClassName:g.a.activeLink,children:"Login"})]})},m=n(101),k=n(16),C=n.p+"static/media/default-avatar.ce420b94.png",_=n(34),L=n.n(_);var N=function(){var e=Object(i.c)(),t=Object(i.d)(j),n=C;return Object(h.jsxs)("div",{className:L.a.container,children:[Object(h.jsx)("img",{src:n,alt:"",width:"45",className:L.a.avatar}),Object(h.jsxs)("span",{className:L.a.name,children:["Welcome, ",t,"!"]}),Object(h.jsx)(m.a,{type:"button",variant:"contained",color:"primary",onClick:function(){return e(k.a.logOut())},children:"LogOut"})]})},y=n(37),I=n.n(y);var w=function(){var e=Object(i.d)(d);return Object(h.jsx)("header",{className:I.a.Header,children:Object(h.jsxs)("div",{className:I.a.NavigContainer,children:[Object(h.jsx)(p,{}),e?Object(h.jsx)(N,{}):Object(h.jsx)(x,{})]})})},U=n(25),R=n(33),S=["children","redirectTo"];var q=function(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/contacts":n,a=Object(R.a)(e,S),r=Object(i.d)(d);return Object(h.jsx)(u.b,Object(U.a)(Object(U.a)({},a),{},{children:r?t:Object(h.jsx)(u.a,{to:c})}))},E=["children","restricted","redirectTo"];var A=function(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,a=e.redirectTo,r=void 0===a?"/":a,s=Object(R.a)(e,E),o=Object(i.d)(d)&&c;return Object(h.jsx)(u.b,Object(U.a)(Object(U.a)({},s),{},{children:o?Object(h.jsx)(u.a,{to:r}):t}))},B=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,112))})),z=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,113))})),M=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,114))})),T=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,115))}));var H,F,Z,J=function(){var e=Object(i.c)(),t=Object(i.d)(b);return Object(c.useEffect)((function(){e(k.a.fetchCurrentUser())}),[e]),!t&&Object(h.jsxs)(l.a,{children:[Object(h.jsx)(w,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)("h1",{children:"Loading..."}),children:Object(h.jsxs)(u.d,{children:[Object(h.jsx)(A,{path:"/",exact:!0,children:Object(h.jsx)(B,{})}),Object(h.jsx)(A,{path:"/register",restricted:!0,children:Object(h.jsx)(z,{})}),Object(h.jsx)(A,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(h.jsx)(M,{})}),Object(h.jsx)(q,{path:"/contacts",exact:!0,children:Object(h.jsx)(T,{})})]})})]})},W=n(50),D=n(32),G=n(3),Q=n(20),V=n(51),K=n.n(V),P=n(4),X=n(9),Y=n(17),$=Y.a.fetchContactRequest,ee=Y.a.fetchContactSuccess,te=Y.a.fetchContactError,ne=Y.a.addContactRequest,ce=Y.a.addContactSuccess,ae=Y.a.addContactError,re=Y.a.deleteItemRequest,se=Y.a.deleteItemSuccess,oe=Y.a.deleteItemError,ie=Y.a.changeFilter,ue=Object(G.d)([],(H={},Object(P.a)(H,ee,(function(e,t){return t.payload})),Object(P.a)(H,ce,(function(e,t){return[].concat(Object(D.a)(e),[t.payload])})),Object(P.a)(H,se,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),H)),le=Object(G.d)(!1,(F={},Object(P.a)(F,$,(function(){return!0})),Object(P.a)(F,ee,(function(){return!1})),Object(P.a)(F,te,(function(){return!1})),Object(P.a)(F,ne,(function(){return!0})),Object(P.a)(F,ce,(function(){return!1})),Object(P.a)(F,ae,(function(){return!1})),Object(P.a)(F,re,(function(){return!0})),Object(P.a)(F,se,(function(){return!1})),Object(P.a)(F,oe,(function(){return!1})),F)),de=Object(G.d)("",Object(P.a)({},ie,(function(e,t){return t.payload}))),je=Object(X.b)({items:ue,filter:de,loading:le}),be=Object(G.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoadingCurrentUser:!1},extraReducers:(Z={},Object(P.a)(Z,k.a.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(P.a)(Z,k.a.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(P.a)(Z,k.a.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(P.a)(Z,k.a.fetchCurrentUser.pending,(function(e,t){e.isLoadingCurrentUser=!0})),Object(P.a)(Z,k.a.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isLoadingCurrentUser=!1})),Object(P.a)(Z,k.a.fetchCurrentUser.rejected,(function(e,t){e.isLoadingCurrentUser=!1})),Z)}).reducer,Oe=Object(D.a)(Object(G.f)({serializableCheck:{ignoredActions:[Q.a,Q.f,Q.b,Q.c,Q.d,Q.e]}})),fe={key:"auth",storage:K.a,whitelist:["token"]},he=Object(G.a)({reducer:{auth:Object(Q.g)(fe,be),contacts:je},middleware:Oe,devTools:!1}),pe={store:he,persistor:Object(Q.h)(he)};n(84),n(85);s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(i.a,{store:pe.store,children:Object(h.jsx)(W.a,{loading:null,persistor:pe.persistor,children:Object(h.jsx)(o.a,{children:Object(h.jsx)(J,{})})})})}),document.getElementById("root"))}},[[86,5,6]]]);
//# sourceMappingURL=main.edd0eccb.chunk.js.map