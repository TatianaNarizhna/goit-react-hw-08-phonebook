{"version":3,"sources":["redux/auth/auth-operations.js","redux/actions.js","components/Navigation/Navigation.module.css","components/AuthNav/AuthNav.module.css","components/UserMenu/UserMenu.module.css","components/AppBar/AppBar.module.css","components/Container/Container.js","components/Container/Container.module.css","redux/auth/auth-selectors.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/default-avatar.png","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/reducer.js","redux/auth/auth-slice.js","redux/store.js","index.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","fetchCurrentUser","createAsyncThunk","_","thunkAPI","a","state","getState","persistedToken","auth","rejectWithValue","get","data","console","error","message","authOperations","register","credentials","post","logIn","logOut","fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteItemRequest","deleteItemSuccess","deleteItemError","changeFilter","module","exports","Container","children","className","s","container","isLoggedIn","user","name","isLoadingCurrentUser","Navigation","useSelector","authSelectors","exact","to","link","activeClassName","activeLink","AuthNav","UserMenu","dispatch","useDispatch","avatar","defaultAvatar","src","alt","width","Button","type","variant","color","onClick","AppBar","Header","NavigContainer","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","HomePageView","lazy","RegisterView","LoginView","ContactsView","App","useEffect","fallback","path","actions","items","createReducer","action","payload","filter","contact","id","loading","combineReducers","authSlice","createSlice","initialState","email","extraReducers","fulfilled","pending","rejected","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.edd0eccb.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n    set(token) {\r\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n      },\r\n      unset() {\r\n        axios.defaults.headers.common.Authorization = '';\r\n      },\r\n};\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n    'auth/fetchCurrent', async (_, thunkAPI) => {\r\n        const state = thunkAPI.getState();\r\n        const persistedToken = state.auth.token;\r\n        \r\n        if(persistedToken === null) {\r\n            // return state;\r\n            return thunkAPI.rejectWithValue();\r\n        }\r\n\r\n        token.set(persistedToken);\r\n        try {\r\n            const { data } = await axios.get('/users/current');\r\n            return data;\r\n        } catch (error) {\r\n            console.error( error.message);\r\n        }\r\n});\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n    try {\r\n        const { data } = await axios.post('/users/signup', credentials);\r\n        token.set(data.token);\r\n        return data; \r\n    } catch (error) {\r\n        console.error( error.message);\r\n    }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n    try {\r\n        const { data } = await axios.post('/users/login', credentials);\r\n        token.set(data.token);\r\n        return data;\r\n    } catch (error) {\r\n        console.error( error.message);\r\n    }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n    try {\r\n        await axios.post('/users/logout');\r\n        token.unset(); \r\n    } catch (error) {\r\n        console.error( error.message);\r\n    }\r\n})\r\n\r\nconst authOperations = {\r\n    register,\r\n    logIn,\r\n    logOut,\r\n    fetchCurrentUser,\r\n}\r\n\r\nexport default authOperations;\r\n","import { createAction } from \"@reduxjs/toolkit\";\r\n\r\nconst fetchContactRequest = createAction('contact/fetchContactRequest');\r\nconst fetchContactSuccess = createAction('contact/fetchContactSuccess');\r\nconst fetchContactError = createAction('contact/fetchContactError');\r\n\r\nconst addContactRequest = createAction('contact/addContactRequest');\r\nconst addContactSuccess = createAction('contact/addContactSuccess');\r\nconst addContactError = createAction('contact/addContactError');\r\n\r\nconst deleteItemRequest = createAction('contact/deleteItemRequest');\r\nconst deleteItemSuccess = createAction('contact/deleteItemSuccess');\r\nconst deleteItemError = createAction('contact/deleteItemError');\r\n\r\nconst changeFilter = createAction('filter/change');\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { \r\n    fetchContactRequest,\r\n    fetchContactSuccess,\r\n    fetchContactError,\r\n    addContactRequest, \r\n    addContactSuccess, \r\n    addContactError, \r\n    deleteItemRequest,\r\n    deleteItemSuccess,\r\n    deleteItemError,\r\n    changeFilter,\r\n };\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__ytjZB\",\"activeLink\":\"Navigation_activeLink__1BMsk Navigation_link__ytjZB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__1sqMw\",\"activeLink\":\"AuthNav_activeLink__dBBZf AuthNav_link__1sqMw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__3QF9G\",\"avatar\":\"UserMenu_avatar__1bACa\",\"name\":\"UserMenu_name__2x9zL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"AppBar_Header__1Dn-O\",\"NavigContainer\":\"AppBar_NavigContainer__10UvO\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Container.module.css\";\n\nconst Container = ({ children }) => {\n  return <div className={s.container}>{children}</div>;\n};\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3R4sp\"};","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\nconst getUserName = state => state.auth.user.name;\r\nconst getIsLoadingCurrentUser = state => state.auth.isLoadingCurrentUser;\r\n\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getIsLoggedIn, getUserName, getIsLoadingCurrentUser };","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport authSelectors from \"../../redux/auth/auth-selectors\";\r\nimport s from \"../Navigation/Navigation.module.css\";\r\n\r\nconst Navigation = () => {\r\n   const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n   return (\r\n      <nav>\r\n      <NavLink exact to=\"/\" className={s.link} activeClassName={s.activeLink}>\r\n          Home\r\n       </NavLink>\r\n\r\n       {isLoggedIn && (\r\n          <NavLink to=\"/contacts\" exact className={s.link} activeClassName={s.activeLink}>\r\n          Contacts\r\n        </NavLink> \r\n       )} \r\n    </nav>\r\n   )\r\n}\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from \"../AuthNav/AuthNav.module.css\";\r\n\r\n function AuthNav() {\r\n    return (\r\n      <div>\r\n        <NavLink\r\n          to=\"/register\"\r\n          exact\r\n          className={s.link}\r\n          activeClassName={s.activeLink}\r\n        >\r\n          Register\r\n        </NavLink>\r\n        <NavLink\r\n          to=\"/login\"\r\n          exact\r\n          className={s.link}\r\n          activeClassName={s.activeLink}\r\n        >\r\n          Login\r\n        </NavLink>\r\n \r\n      </div>\r\n    );\r\n  }\r\n\r\n  export default AuthNav;","export default __webpack_public_path__ + \"static/media/default-avatar.ce420b94.png\";","import Button from '@material-ui/core/Button';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\nimport authOperations from '../../redux/auth/auth-operations';\r\nimport defaultAvatar from './default-avatar.png';\r\nimport s from \"./UserMenu.module.css\"\r\n\r\n\r\n function UserMenu() {\r\n     const dispatch = useDispatch();\r\n     const name = useSelector(authSelectors.getUserName);\r\n     const avatar = defaultAvatar;\r\n\r\n    return (\r\n        <div className={s.container}>\r\n            <img src={avatar} alt=\"\" width=\"45\" className={s.avatar}/>\r\n            <span className={s.name}>Welcome, {name}!</span>\r\n            <Button type=\"button\" variant=\"contained\" color=\"primary\" onClick={() => dispatch(authOperations.logOut())}>\r\n                LogOut\r\n            </Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserMenu;","import { useSelector } from \"react-redux\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\nimport AuthNav from \"../AuthNav/AuthNav\";\r\nimport UserMenu from \"../UserMenu/UserMenu\";\r\nimport authSelectors  from \"../../redux/auth/auth-selectors\";\r\nimport s from \"../AppBar/AppBar.module.css\";\r\n\r\n\r\n\r\n function AppBar() {\r\n     const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    return (\r\n       \r\n        <header className={s.Header}>\r\n          <div className={s.NavigContainer}>\r\n            <Navigation />\r\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n           </div>\r\n        </header>\r\n           \r\n   \r\n    )\r\n};\r\n\r\nexport default AppBar;","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authSelectors from \"../redux/auth/auth-selectors\";\r\n\r\nfunction PrivateRoute ({ \r\n    children, \r\n    redirectTo = \"/contacts\",\r\n     ...routeProps }) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    \r\n    return (\r\n        <Route {...routeProps}>\r\n        {isLoggedIn ? children : <Redirect to={ redirectTo } />}\r\n        </Route>\r\n    )\r\n\r\n};\r\n\r\nexport default PrivateRoute;","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect  } from \"react-router-dom\";\r\nimport authSelectors from \"../redux/auth/auth-selectors\";\r\n\r\nfunction PublicRoute ({ \r\n    children, \r\n    restricted = false, \r\n    redirectTo = \"/\",\r\n    ...routeProps \r\n}) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    const shouldRedirect = isLoggedIn && restricted;\r\n\r\n    return (\r\n        <Route {...routeProps}>\r\n            {shouldRedirect ? <Redirect to={ redirectTo } /> : children}\r\n        </Route>\r\n    )\r\n  \r\n};\r\n\r\nexport default PublicRoute;","import { lazy, Suspense } from \"react\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Switch } from \"react-router-dom\";\nimport Container from \"./components/Container/Container\";\nimport AppBar from \"./components/AppBar/AppBar\";\nimport PrivateRoute from \"./components/PrivateRoute\";\nimport PublicRoute from \"./components/PublicRoute\";\nimport authOperations from \"./redux/auth/auth-operations\";\nimport authSelectors from \"./redux/auth/auth-selectors\";\n\nconst HomePageView = lazy(() => import(\"./views/HomePageView/HomePageView\" /* webpackChunkName: 'home-page-view' */ ));\nconst RegisterView = lazy(() => import(\"./views/RegisterView/RegisterView\" /* webpackChunkName: 'register-view' */));\nconst LoginView = lazy(() => import(\"./views/LoginView/LoginView\" /* webpackChunkName: 'login-view' */));\nconst ContactsView = lazy(() => import(\"./views/ContactsView/ContactsView\" /* webpackChunkName: 'contacts-view' */));\n\n\n  function App() {\n    const dispatch = useDispatch();\n    const isLoadingCurrentUser = useSelector(authSelectors.getIsLoadingCurrentUser);\n\n    useEffect(() => {\n      dispatch(authOperations.fetchCurrentUser())\n    }, [dispatch]);\n\n    return (\n      !isLoadingCurrentUser && (\n        <Container>\n        <AppBar />\n\n         <Suspense fallback={<h1>Loading...</h1>}>\n\n           <Switch>\n            <PublicRoute path=\"/\" exact>\n              <HomePageView />\n            </PublicRoute>\n\n            <PublicRoute path=\"/register\" restricted>\n              <RegisterView />\n            </PublicRoute>\n\n            <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\n              <LoginView />\n            </PublicRoute>\n\n            <PrivateRoute path=\"/contacts\" exact>\n              <ContactsView />\n            </PrivateRoute>\n\n          </Switch>\n         </Suspense>\n\n        </Container>\n      )\n    );\n}\n\n\nexport default App;\n\n\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport actions from './actions';\r\n\r\nconst { \r\n    fetchContactRequest,\r\n    fetchContactSuccess,\r\n    fetchContactError,\r\n    addContactRequest, \r\n    addContactSuccess, \r\n    addContactError, \r\n    deleteItemRequest,\r\n    deleteItemSuccess,\r\n    deleteItemError, \r\n    changeFilter} = actions;\r\n\r\nconst items = createReducer([], {\r\n    [fetchContactSuccess]: (_, action) => action.payload,\r\n    [addContactSuccess]: (state, action) => [...state, action.payload],\r\n    [deleteItemSuccess]: (state, action) => \r\n    state.filter(contact => contact.id !== action.payload)\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n    [fetchContactRequest]: () => true,\r\n    [fetchContactSuccess]: () => false,\r\n    [fetchContactError]: () => false,\r\n    [addContactRequest]: () => true,\r\n    [addContactSuccess]: () => false,\r\n    [addContactError]: () => false,\r\n    [deleteItemRequest]: () => true,\r\n    [deleteItemSuccess]: () => false,\r\n    [deleteItemError]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n    [changeFilter]: (_, action) => action.payload,\r\n});\r\n\r\nexport default combineReducers({\r\n    items,\r\n    filter,\r\n    loading,\r\n})\r\n  \r\n\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n    user: { name: null, email: null },\r\n    token: null,\r\n    isLoggedIn: false,\r\n    isLoadingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    extraReducers: {\r\n        [authOperations.register.fulfilled](state, action) {\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n            state.isLoggedIn = true;\r\n        },\r\n        [authOperations.logIn.fulfilled](state, action) {\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n            state.isLoggedIn = true;\r\n        },\r\n        [authOperations.logOut.fulfilled](state, _) {\r\n            state.user = { name: null, email: null };\r\n            state.token = null;\r\n            state.isLoggedIn = false;\r\n        },\r\n        [authOperations.fetchCurrentUser.pending](state, _) {\r\n            state.isLoadingCurrentUser = true;\r\n        },\r\n        [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n            state.user = action.payload;\r\n            state.isLoggedIn = true;\r\n            state.isLoadingCurrentUser = false;\r\n        },\r\n        [authOperations.fetchCurrentUser.rejected](state, _) {\r\n            state.isLoadingCurrentUser = false;\r\n        }\r\n    },\r\n});\r\n\r\nexport default authSlice.reducer;","// import { combineReducers } from \"redux\";\r\nimport { configureStore,getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\n// import logger from \"redux-logger\";\r\nimport { \r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n } from 'redux-persist';\r\n import storage from 'redux-persist/lib/storage';\r\nimport contactsReducer from \"./reducer\";\r\nimport authReducer from \"./auth/auth-slice\";\r\n\r\n\r\nconst middleware = [...getDefaultMiddleware({\r\n  serializableCheck: {\r\n    ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER]\r\n  }\r\n})];\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n}\r\n\r\n// const rootReducer = combineReducers({\r\n//   contacts: persistReducer(contactsPersistConfig, contactsReducer),\r\n// });\r\n\r\nconst store = configureStore({\r\n    // reducer: rootReducer,\r\n    reducer: {\r\n      auth: persistReducer(authPersistConfig, authReducer),\r\n      contacts: contactsReducer,\r\n    },\r\n    middleware,\r\n    devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nconst persistor = persistStore(store);\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { store, persistor };\r\n\r\n\r\n\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from 'redux-persist/integration/react';\nimport store  from \"./redux/store\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store.store}>\n      <PersistGate loading={null} persistor={store.persistor}>\n        <BrowserRouter>\n        <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}